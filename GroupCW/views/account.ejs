<!doctype html>
<html lang="en">

<%- include('header'); -%>

<body>
    <div id="account">
        <%- include('navbar'); -%>

<section class="account-page ">
    <section class="your-account card rounded shadowed">
        <h2 class="underlined">{{account}}</h2>
        <ul>

            <li>2 Responses to 1 Questions</li>
            <li>Average response rating of 4.2<span
                    class="material-symbols-rounded star-filled inline-adjusted">star_rate</span> </li>
        </ul>
        <br>
        <br>
        <button class="red-button">Delete Account</button>
        <button onclick="window.location.href = '/set-new-password'">Reset Password</button>
    </section>

    <section class="your-responses card rounded shadowed">
        <h2 class="underlined">Your Responses</h2>

        <div class="response card rounded shadowed" v-for="(response, index) in interviews" :key="response.id">
            <div class="response-meta">
                <p class="username"><span class="material-symbols-rounded">person</span>{{response.username}}
                </p>
                <span class="timestamp">19/12/2023 at 13:45</span>
            </div>

            <h2 class="question-text">{{response.interviewQuestion}}</h2>

            <div class="response-options">
                <span class="avg-rating flex-center">4.2<span
                        class="material-symbols-rounded star-filled">star_rate</span></span>
                <input type="checkbox" :id="'visibility-toggle-' + index" class="toggle hidden">
                <label :for="'visibility-toggle-' + index" class="toggle-label" title="Public visibility toggle">
                    <span class="material-symbols-rounded toggle-on">visibility</span>
                    <span class="material-symbols-rounded toggle-off">visibility_off</span>
                </label>

                <input type="checkbox" :id="'transcript-toggle-' + index" class="toggle hidden">
                <label :for="'transcript-toggle-' + index" class="toggle-label" title="Toggle transcript">
                    <span class="material-symbols-rounded toggle-on">description</span>
                    <span class="material-symbols-rounded toggle-off strikethrough">description</span>
                </label>

                <input type="checkbox" :id="'comments-toggle-' + index" class="toggle hidden">
                <label :for="'comments-toggle-' + index" class="toggle-label" title="Toggle comments">
                    <span class="material-symbols-rounded toggle-on">comment</span>
                    <span class="material-symbols-rounded toggle-off">comments_disabled</span>
                </label>
                <button
                    class="material-symbols-rounded icon-button minimal-button minimal-red-button">delete</button>
            </div>

            <div class="response-timeline">
                <hr>
            </div>
            <div class="response-controls">
                <button class="material-symbols-rounded icon-button minimal-button">replay_10</button>
                <button class="material-symbols-rounded icon-button minimal-button">play_arrow</button>
                <button class="material-symbols-rounded icon-button minimal-button">forward_10</button>
            </div>
            <div class="response-transcript">
                <h3 class="underlined">Transcript</h3>
                <p>{{response.transcript[0].text}}</p>
            </div>
            <div class="response-comments">
                <h3 class="underlined">Comments</h3>
                <div class="comment rounded" v-for="comment in response.comments" :key="comment.id">
                    <p class="comment-username"><span class="material-symbols-rounded">person</span>{{comment.username}}
                    </p>
                    <p class="comment-text">{{comment.comment}}</p>
                    <div class="like-count rounded">
                        <button class="icon-button material-symbols-rounded minimal-button" :class="{ 'filled': isLiked(comment) }" @click="like(comment)">thumb_up</button>
                        <span>{{comment.thumbs_up.length}}</span>
                    </div>
                    <div class="dislike-count rounded">
                        <button class="icon-button material-symbols-rounded minimal-button minimal-red-button" :class="{ 'filled': isDisliked(comment) }" @click="dislike(comment)">thumb_down</button>
                        <span>{{comment.thumbs_down.length}}</span>
                    </div>
                </div>
                <div class="new-comment">
                    <textarea class="input" placeholder="Add a comment..." v-model="response.commentText"></textarea>
                    <button class="material-symbols-rounded icon-button" @click="submitComment(response)">chevron_right</button>
                </div>
            </div>
        </div>
    </section>
</section>

</main>
</div>

<script>const USER_ID = '<%= id %>';</script>

<%- include('footer'); -%>

<!-- Application Javascript -->
<script defer src="/static/account.js"></script>

</body>
</html>